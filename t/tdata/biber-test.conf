# config file for Biber

sortlocale = testlocale
mincrossrefs = 5
<collate_options>
 level = 3
 table = /home/user/data/otherkeys.txt
</collate_options>
<nosort>
  # strip prefices like 'al-' when sorting author
  author         \A\p{L}{2}\p{Pd}
  # strip diacritics when sorting author
  author         [\x{2bf}\x{2018}]
  translator     [\x{2bf}\x{2018}]
</nosort>
<map>
  # bibtex driver user map overrides
  <bibtex>
    BMAP_OVERWRITE 1
    <entrytype *>
      BMAP_PERSOURCE doesnotexist.bib # Doesn't exist, just testing source restrictions
      BMAP_TARGET CUSTOMB
    </entrytype>
    <entrytype ARTICLE>
      BMAP_PERSOURCE examples.bib
      BMAP_PERSOURCE examples2.bib # Doesn't exist, just testing multi for this option
      <alsoset>
        KEYWORDS "keyw1, keyw2"
      </alsoset>
    </entrytype>
    <entrytype CONVERSATION>
      BMAP_TARGET CUSTOMA
      <alsoset>
        VERBA BMAP_ORIGENTRYTYPE
        VERBB somevalue
        VERBC somevalue
      </alsoset>
    </entrytype>
    <entrytype CHAT>
      BMAP_TARGET CUSTOMB
    </entrytype>
    <globalfield>
      BMAP_PERSOURCE examples.bib
      ABSTRACT BMAP_NULL
      CONDUCTOR NAMEA
      GPS USERA
      PARTICIPANT NAMEA
      USERB USERD
    </globalfield>
    <globalfield PUBMEDID>
       BMAP_TARGET EPRINT
      <alsoset>
        EPRINTTYPE BMAP_ORIGFIELD
        USERD "some string of things"
      </alsoset>
    </globalfield>
    <globalfield LISTB>
      BMAP_PERSOURCE examples.bib
      BMAP_MATCH \A(\S{2})
      BMAP_REPLACE REP$1CED
    </globalfield>
    <field userb>
      BMAP_PERSOURCE examples.bib
      BMAP_PERTYPE MISC
      BMAP_TARGET BMAP_NULL
      <alsoset>
        USERE "a string"
        USERF BMAP_NULL
      </alsoset>
    </field>
    <field lista>
      BMAP_PERTYPE REPORT
      BMAP_TARGET BMAP_NULL
    </field>
    <field listc>
      BMAP_PERTYPE UNPUBLISHED
      BMAP_TARGET INSTITUTION
      BMAP_MATCH \A(\S{2})
      BMAP_REPLACE REP$1CED
    </field>
    # Not used in tests but need to check failed pertype checks in driver
    <field title>
      BMAP_PERTYPE ONLINE
      BMAP_TARGET BMAP_NULL
    </field>
  </bibtex>
  # endnotexml driver user map overrides
  <endnotexml>
    BMAP_OVERWRITE 1
    <entrytype "journal Article">
      BMAP_PERSOURCE endnote.xml
      BMAP_TARGET REPORT
      <alsoset>
        USERA BMAP_ORIGENTRYTYPE
      </alsoset>
    </entrytype>
    <field pages>
      BMAP_PERSOURCE endnote.xml
      BMAP_PERTYPE "Journal Article"
      BMAP_MATCH 64
      BMAP_REPLACE 66
    </field>
    <globalfield>
      BMAP_PERSOURCE endnote.xml
      ABSTRACT BMAP_NULL
    </globalfield>
  </endnotexml>
  # ris driver user map overrides
  <ris>
    BMAP_OVERWRITE 0
    <entrytype JOUR>
      BMAP_PERSOURCE ris1.ris
      BMAP_TARGET REPORT
    </entrytype>
    <entrytype BOOK>
      BMAP_TARGET MAPBOOK
      <alsoset>
        KEYWORDS somevalue
      </alsoset>
    </entrytype>
    <globalfield>
      BMAP_PERSOURCE ris1.ris
      N2 BMAP_NULL
    </globalfield>
    <field JO>
      BMAP_PERSOURCE ris1.ris
      BMAP_PERTYPE JOUR
      BMAP_MATCH Neurosurg\.
      BMAP_REPLACE Neurosurgery
    </field>
  </ris>
  # zoterordfxml driver user map overrides
  <zoterordfxml>
    BMAP_OVERWRITE 1
    <field "dc:title">
      BMAP_PERTYPE journalArticle
      BMAP_MATCH (.+)
      BMAP_REPLACE \L$1
    </field>
    <field "dc:subject">
      BMAP_PERSOURCE zotero.rdf
      BMAP_PERTYPE journalArticle
      BMAP_PERTYPE book
      BMAP_PERTYPE bookSection
      BMAP_TARGET BMAP_NULL
    </field>
  </zoterordfxml>
</map>
